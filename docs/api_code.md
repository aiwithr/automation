### কেন এপিআই কোড করা শিখবেন?

যদিও শুরুতে নেটওয়ার্ক ডিভাইসগুলোকে মানুষের সাথে যোগাযোগ করার জন্য তৈরি করা হলেও পরে সময়ের সাথে সাথে যন্ত্রের সাথে যোগাযোগ করার জন্য তৈরি করা হয়েছে। আর, কাহাতক মানুষ কষ্ট করবে? এই এপিআই তৈরির অর্থ হচ্ছে, যন্ত্র থেকে যন্ত্রের মধ্যে যোগাযোগ শুরু হয়েছে যা অনেকটাই ‘সফটওয়্যার টু সফটওয়্যার’ আন্ডারস্ট্যান্ডিং থেকে। এই সফটওয়্যার এবং নেটওয়ার্ক ডিভাইসের সফটওয়্যার একে অপরের সাথে যোগাযোগ  করে এপিআই দিয়ে।  এর অর্থ হচ্ছে আমাদেরকে কোড করা শিখতে হবে এপিআই দিয়ে। এপিআই (API) দিয়ে কোড করা শিখলে আপনি আপনার নেটওয়ার্ক ইনফ্রাস্ট্রাকচারের সঙ্গে দ্রুত এবং দক্ষতার সাথে বড় বড় বিশেষ করে রিপিটেটীটিভ কাজ শেষ করতে পারবেন। 

### সফটওয়্যার ডিফাইন্ড নেটওয়ার্ক 

আমরা যেই নেটওয়ার্ক চালিয়ে বড় হয়েছি সেই নেটওয়ার্কের অ্যাক্সেস করার জন্য আমরা শুরুতে কনসোল ক্যাবল নিয়ে ঘুরতাম। এরপরে আমরা রিমোটলি তাদেরকে টেলনেট অথবা সিকিউর সেল দিয়ে এক্সেস করতাম যদি আইপি কনফিগার করা থাকতো। সাধারণত ওই ডিভাইসে তিন ধরনের অপারেশনাল প্লেন থাকতো, যেগুলো নিয়ে এখনকার আলাপ। এর মধ্যে ডাটা প্লেন, যেটা আসলে রাউটার বা সুইচ এর আসল কাজ। এর কাজ ছিল, একটা পোর্টে প্যাকেট পেলে সেটাকে আর একটা ই-গ্রেস পোর্টে যত তাড়াতাড়ি সম্ভব পাঠিয়ে দিত। এর উপরেই ছিল কন্ট্রোল প্লেন, যার মধ্যে সনাতনভাবে বিভিন্ন অ্যালগরিদম চলত - যেটা ব্যবহার করে প্যাকেটগুলো নিজস্ব ডেসটিনেশনে যেত। যদি রাউটারে ‘ওএসপিএফ’ প্রটোকল চালাতাম, তাহলে তার জন্য নির্দিষ্ট অ্যালগরিদম চলত এই কন্ট্রোল প্লেনে। সুইচে সাধারণত ‘স্প্যানিং ট্রি’ অ্যালগরিদম চলত এই কন্ট্রোল প্লেনে। ফাইনালি, ম্যানেজমেন্ট প্লেনে একটা সফটওয়্যার চলত যার সাথে আমরা মানুষ সরাসরি যোগাযোগ করতাম। আমরা হয়তোবা টেলনেট অথবা সিকিউর শেল দিয়ে বিভিন্ন কমান্ড পাস করতাম সেগুলো সব যেতো এই ম্যানেজমেন্ট প্লেন দিয়ে। 

এখন, মানুষ তো অনেক কাজ করলো। বুদ্ধিমান কিছু মানুষ চিন্তা করল যে, এই ডিভাইসগুলোর ম্যানেজমেন্ট প্লেনের সাথে যদি একটা সফটওয়্যার, বিশেষ করে একটা ‘এসডিএন’ কন্ট্রোলার লাগিয়ে দেওয়া যায় - তাহলে সেই সবগুলো রাউটার বা সুইচকে চালাবে একটা ‘সেন্ট্রালাইজড’ সিস্টেম থেকে। এটাকে ডিস্ট্রিবিউটেড কন্ট্রোল প্লেন বলা যেতে পারে, যেখান থেকে ‘এসডিএন কন্ট্রোলার’ প্রতিটা ডিভাইস, সেটা রাউটার, সুইচ, ফায়ারওয়াল যাই হোক না কেন সবগুলোই ‘এসডিএন কন্ট্রোলারের’ আওতায় থাকবে। 

এখন আসি আসল কথায়। আমরা যেভাবে ডিভাইসগুলোর সাথে কমান্ড লাইন ইন্টারফেসে কমান্ড দিয়ে দিয়ে নেটওয়ার্ক চালাতাম, সেই আইডিয়া থেকে বের হয়ে আসতে চাচ্ছি অনেকদিন থেকেই। এই এসডিএন কন্ট্রোলারের মাধ্যমে। আমরা এটাকে বলছি, ‘ইনটেন্ট বেজ নেটওয়ার্কিং’। আমরা রাউটারের সরাসরি কমান্ড লেখার পরিবর্তে এসডিএন কন্ট্রোলারকে বলবো - আমরা আসলে কি চাই। যেটাকে আমরা বলতে পারি ‘ইনটেন্ট’, অর্থাৎ আমরা সেই কমান্ড প্যারামিটার না দিয়ে সরাসরি আমাদের চাহিদাটা কন্ট্রোলারকে বললে কন্ট্রোলার সফটওয়্যারের মাধ্যমে রাউটার বা সুইচের ম্যানেজমেন্ট কন্ট্রলারে সেই কমান্ডই পাঠাবে যেটা যার জন্য প্রযোজ্য। মানুষ সরাসরি সেই কমান্ডগুলো আর লিখবে না। ধরা যাক, আমি বলতে পারি নেটওয়ার্কে ভিডিওকে প্রায়োরোটাইজড করতে হবে, তাহলে সেই এসডিএন কন্ট্রোলার, সেই রাউটারগুলোর জন্য যে ধরনের কমান্ডগুলো প্রযোজ্য সেগুলোই বানিয়ে পাঠিয়ে দিবে। মানুষকে আলাদা করে বিভিন্ন রাউটারে ঢুকে আলাদা আলাদা করে কমান্ড দিতে হবে না। এর মধ্যে যারা বিভিন্ন মডেল, যেমন ইয়াং ডাটা মডেল ‘কনফর্ম’ (মানে মানবে) করবে অর্থাৎ সেটা কি নিয়ম মেনে চলবে, তখন তারা সেই স্ট্রাকচারে নিজের মধ্যে যোগাযোগ করবে। এই যোগাযোগ করার মাধ্যম হচ্ছে এপিআই, যার মাধ্যমে একটা সফটওয়্যার আরেকটা সফটওয়্যারের সাথে যোগাযোগ করে। যারা এই একই ডাটা মডেল ফলো করবে, সেখানে বিভিন্ন ভেন্ডরের ডিভাইস, যেমন সিসকো, জুনিপার, হুয়াওয়ে, অ্যারিস্টা ইত্যাদি সব ডিভাইস একটা নেটওয়ার্কে চলতে পারবে। 

### তাহলে এপিআই কেন ব্যবহার করবেন?

অনেক কমান্ড-লাইন বা ওয়েব ইন্টারফেসের (যেমন মাইক্রোটিক) কাজগুলো বারবার এমনি ‘ম্যানুয়ালি’ করতে হয়, যেমন, কমান্ড টাইপ করা, কমান্ড কপি- পেস্ট করা, বা গ্রাফিক্যাল ইন্টারফেসের মাধ্যমে ক্লিক করতে করতে বিরক্তি লেগে যায়। এই ক্ষেত্রে, মানুষ ‘অপারেটর’ সরাসরি সিস্টেম বা সফটওয়্যারের সাথে ইন্টারফেস করছে। কিন্তু মানুষ অপারেটরের পরিবর্তে যদি এক সফটওয়্যার অন্য সফটওয়্যার (এসডিএন) বা সিস্টেমের সাথে ইন্টারফেস করে? এই কাজটা অটোমেটিকভাবে আরও দক্ষতার সাথে চলতে পারতো, এবং রিপিট কাজ কমে যেতো। এই কাজগুলো ইন্টারফেস অ্যাপ্লিকেশনের মধ্যে, সেখানে এপিআই (API) দিয়ে ম্যাজিকের মতো কাজ করে।

কম্পিউটার মানে সফটওয়্যার দিয়ে হাজারো রিপিট, বিশাল বিশাল কাজ করতে খুবই ভালো দক্ষ। কিন্তু যদি চান, কম্পিউটার/সফটওয়্যার আপনার ইনফ্রাস্ট্রাকচারকে কিছু কাজ করতে ব্যবহার করুক, তাহলে আপনার এপিআই দরকার। আপনি এই মেশিন-টু-মেশিন ইন্টারফেসগুলো ব্যবহার করে নেটওয়ার্ক ইনফ্রাস্ট্রাকচারে সহজ রিকোয়েস্ট পাঠাতে পারেন এবং এই রিকোয়েস্টের পরিবর্তে দরকারি ডেটা পেতে পারেন। আপনি এই সহজ ইন্টারঅ্যাকশনগুলোর উপর ভিত্তি করে অটোমেটিক অনেক সলিউশন তৈরি করতে পারেন যা এমনকি সবচেয়ে কঠিন নেটওয়ার্কিং সমাধান করতে পারে। বিশ্বাস করুন, সত্যি বলছি!

### কিভাবে আপনার প্রসেসগুলোকে কোড করবেন?

কোডিং হল একটা ল্যাঙ্গুয়েজ ব্যবহার করে স্টেপ বাই স্টেপ ইন্সট্রাকশন তৈরি করার প্রক্রিয়া যা সেই কম্পিউটার বুঝতে পারে এবং সেই নির্দিষ্ট কাজটা সম্পন্ন করতে পারে। কোড শিখে এবং প্রোগ্রামেবল ইনফ্রাস্ট্রাকচারের সাথে কাজ করতে যে সময়ের ইনভেস্টমেন্ট প্রয়োজন, সেটা আমার সাথে দিলে এই ইনভেস্টমেন্টের উপর তখন থেকে শুরু করে কন্টিনিউয়াস রেজাল্ট পাবেন।

আপনাকে একটা সমস্যা দেওয়া হল, চলুন আমরা দুজনে মিলে সমস্যাটা সমাধান করি। আমাদের নেটওয়ার্কে বিভিন্ন কাজে প্রচুর ইন্টারফেস চালু করা থাকে যেটা ‘ইনঅ্যাকটিভ’ থাকলে বন্ধ করে দেয়া উচিত।  আমরা হয়তোবা সেটা আর মনে করে বন্ধ করি না।  আমরা এখানে একটা ‘অটোমেশন’ করতে চাচ্ছি যার মাধ্যমে একটা এপিআই রিকোয়েস্ট দিয়ে নেটওয়ার্কের যত ইন্টারফেস আছে ‘ইনঅ্যাক্টিভ’, সেটা ৩০ দিনের বেশি হয়ে গেলে বন্ধ করে দিব। 

এখানে একটা হাই-লেভেল ডেসক্রিপশন দেওয়া হল:

1. নেটওয়ার্কে একটা সুইচের স্টেটাস নিয়ে আসবো, তার সব ইন্টারফেসের তালিকা সহ।
2. ওই সুইচের ভেতরের একটা ইন্টারফেসের স্টেটাস নিয়ে আসি।
3. ইন্টারফেসের সর্বশেষ পরিবর্তনের সময় (টাইমস্ট্যাম্প) নিয়ে আসি।
4. চেক করুন ইন্টারফেসটা চালু আছে কিনা।

যদি ইন্টারফেসটা ডাউন থাকে এবং ইন্টারফেসের শেষ পরিবর্তন ৩০ দিনের বেশি আগে হয়ে থাকে, তাহলে ইন্টারফেস বন্ধ করুন এবং তার ডেসক্রিপশনটা পাল্টে "ইন্টারফেস পলিসি অনুযায়ী বন্ধ" হিসাবে সেট করুন।

উপরে ওই প্রক্রিয়াটা একই সুইচের অন্যান্য ইন্টারফেস এবং এরপর বাকি সুইচগুলোর জন্য প্রয়োজন অনুসারে ‘রিপিট’ করুন। চিন্তা করুন, যে আপনার কোম্পানিতে প্রায় ৪০০০ সুইচ আছে। এগুলো কি মানুষের দ্বারা করা সম্ভব? না। দরকার অটোমেশন। 

আপনি এই কাজটা যদি ম্যানুয়ালি করতে চান, প্রয়োজনীয় ইন্টারফেস এবং সুইচগুলোতে এই একই পদ্ধতি রিপিট করতে আমাদের কয়েক বছর লেগে যেতে পারে। তবে এই প্রক্রিয়াটাকে ‘কোডিফাই’ করলে এটাকে দ্রুত এবং সহজে বার বার ব্যবহার করতে পারবেন। এই প্রক্রিয়াটাকে কোড করতে, আপনাকে একটা ইন্সট্রাকশন সেট লিখতে হবে মেশিন রিডেবল ভাষায় যা এই প্রক্রিয়াটাকে এন্ড টু এন্ড ডিফাইন করবে। আপনাকে কেবল একবারই ইন্সট্রাকশন লিখতে হবে, তারপরে নাকে তেল দিয়ে ঘুমাবেন। আপনার সিস্টেম বছর ধরে নির্দিষ্ট যেকোনো ইন্টারফেসে, সুইচ ধরে ধরে ইন্সট্রাকশনগুলো বারবার চালাবে প্রয়োজন মতো। আপনি, একজন মানুষ অপারেটর, বুদ্ধিমত্তা দিয়ে “কি এবং কিভাবে করতে হবে” ইন্সট্রাকশন সেট লিখবেন, তখন সিস্টেম এই বোরিং কাজটাকে সঠিকভাবে নির্দেশিতভাবে সম্পন্ন করবে, যতবার প্রয়োজন।

শুনতে দারুন শোনালেও এই পুরো উদাহরণের ব্যাপারটাকে একটা প্রোগ্রামে ভাষায় কোড করা অতটা সহজ হয় না অনেক সময়।  এখানে পাইথন (Python) প্রোগ্রামিং ভাষায় একটা কোড দেওয়া হল যা ওই কাজটা করে। এই কোডটা ধরে নিচ্ছে যে, মানুষ অপারেটর এই শর্তগুলোকে কোথাও ডিফাইন করেছেন, যেমন my_network এবং is_down এবং last_change কে আলাদাভাবে ডিফাইন করেছেন।

```python
# নেটওয়ার্কের প্রতিটি সুইচের জন্য লুপ চালানো হচ্ছে
for switch in my_network:
    # প্রতিটি সুইচের সব ইন্টারফেসের জন্য আরেকটি লুপ
    for interface in switch:
        # যাচাই করা হচ্ছে ইন্টারফেসটি বন্ধ কিনা এবং শেষ পরিবর্তন 30 দিনের বেশি আগে কিনা
        if interface.is_down() and interface.last_change() > thirty_days:
            # যদি উপরের শর্ত সত্য হয়, তাহলে ইন্টারফেসটি বন্ধ করা হচ্ছে
            interface.shutdown()
            # ইন্টারফেসের ডেসক্রিপশন আপডেট করা হচ্ছে
            interface.set_description("Interface disabled per Policy")
```

আপনি যদি এই লাইনগুলোর সিনট্যাক্স বুঝতে না পারেন, তাহলে একদম চিন্তা করবেন না। মনোযোগ দিন - কিভাবে এই উদাহরণটা আগের হাই-লেভেল ‘সুডো’-কোডে ডিফাইন করা পুরো প্রক্রিয়াটাকে ‘কোডিফাই’ করে। এই প্রক্রিয়াটার মূল লজিক, ইন্সট্রাকশনগুলো যেভাবেই বাস্তবায়িত হোক না কেন, এর সুইচগুলোর তালিকা ধরে একে একে ইন্টারফেসগুলোকে টেস্ট/পরীক্ষা করা এবং দরকারি চেক – এবং কাজের স্টেপগুলোকে কমপ্লিট করা।

১. আমার নেটওয়ার্কের প্রতিটা সুইচের জন্য ...
২. ওই সুইচে প্রতিটা ইন্টারফেসের জন্য ...
৩. যদি ওই ইন্টারফেসটা ডাউন থাকে এবং ৩০ দিনেরও বেশি সময় ধরে স্টেটাস না পরিবর্তন  হয়ে থাকে, তাহলে:
১. ইন্টারফেসটা বন্ধ করুন।
২. ইন্টারফেসের ডেসক্রিপশনটা আপডেট করুন।

আমি কোড অংশটি বাংলায় ব্যাখ্যা করে আবার লিখছি:

!!! list "আমরা কি বুঝলাম?"
1. প্রথমে, `my_network` নামের একটি লিস্ট বা অবজেক্ট থেকে প্রতিটি সুইচকে নেওয়া হচ্ছে। এটা একটা লুপ দিয়ে চালানো হচ্ছে।
2. প্রতিটি সুইচের জন্য, আমরা আরেকটা লুপ চালাচ্ছি যা সেই সুইচের সব ইন্টারফেস নিয়ে কাজ করবে।
3. প্রতিটি ইন্টারফেসের জন্য, আমরা দুটি শর্ত যাচাই করছি:
   - `interface.is_down()`: এটা চেক করছে ইন্টারফেসটা বন্ধ কিনা।
   - `interface.last_change() > thirty_days`: এটি চেক করে ইন্টারফেসের শেষ পরিবর্তন ৩০ দিনের আগে হয়েছে কিনা।
4. যদি উপরের দুটি শর্তই সত্য হয়, তাহলে:
   - `interface.shutdown()`: এই ফাংশনটি ইন্টারফেসটিকে সম্পূর্ণভাবে বন্ধ করে দেয়।
   - `interface.set_description("Interface disabled per Policy")`: এই লাইনটি ইন্টারফেসের ডেসক্রিপশন আপডেট করে, যাতে পরে কেউ দেখলে বুঝতে পারে কেন এটা বন্ধ করা হয়েছে।

এই স্যুডোকোডটা চালানোর ফলে, নেটওয়ার্কের সব নিষ্ক্রিয় ও দীর্ঘদিন অব্যবহৃত ইন্টারফেস স্বয়ংক্রিয়ভাবে বন্ধ হয়ে যাবে, যা নেটওয়ার্ক ম্যানেজমেন্টকে অনেক দক্ষ করে তুলবে।


### এপিআই ব্যবহারের আরো কিছু উপকারী দিক

1. **স্বয়ংক্রিয় ব্যাকআপ (Automated Backups)**: বিশাল নেটওয়ার্কের ক্ষেত্রে প্রতিটা ডিভাইসের কনফিগারেশন ব্যাকআপ রাখা অত্যন্ত গুরুত্বপূর্ণ। এপিআই ব্যবহার করে আপনি সহজেই প্রতিদিন বা প্রয়োজন অনুযায়ী সময়ে সময়ে ব্যাকআপ নিতে পারেন।

2. **প্রি- এবং পোস্ট-ভ্যালিডেশন (Pre- and Post-Validation)**: নেটওয়ার্ক পরিবর্তনের আগে এবং পরে ডিভাইসগুলোর স্টেটাস যাচাই করা জরুরি। এপিআই দিয়ে এই প্রক্রিয়াটা স্বয়ংক্রিয় করতে পারেন যাতে কোন ধরণের ভুল না হয়। 

3. **রিপোর্টিং (Reporting)**: এপিআই ব্যবহার করে বিভিন্ন ডেটা সংগ্রহ করে সেগুলোর উপর ভিত্তি করে রিপোর্ট তৈরি করা যায়, যা নেটওয়ার্ক টিমের জন্য অত্যন্ত দরকারি। আমি নিজেই আমাদের নেটওয়ার্কের মধ্যে শুরুতেই এ ধরনের অটোমেশন করেছিলাম। নেটওয়ার্কের ভেতরের হেলথ, নেটওয়ার্কটা আসলে কিভাবে চলছে সেটাকে জানার জন্য এপিআই দিয়ে অটোমেটেড রিপোর্টিং ব্যবহার শুরু করা যেতে পারে। 

4. **কন্টিনিউয়াস কমপ্লায়েন্স (Continuous Compliance)**: নেটওয়ার্ক ডিভাইসগুলো কমপ্লায়েন্স নীতিমালা মেনে চলছে কিনা সেটা নিয়মিত পরীক্ষা করা প্রয়োজন। এপিআই দিয়ে আপনি এই প্রক্রিয়াটা স্বয়ংক্রিয় করতে পারেন। মানুষ খুব ভুলো মন,  সে কারণে ব্যাপারটা মানুষের হাতে না ছেড়ে দিয়ে যন্ত্রের হাতে ছেড়ে দিলে কোন সমস্যায় পড়তে হয় না। 

5. **ইভেন্ট-ড্রিভেন অটোমেশন (Event-Driven Automation)**: নির্দিষ্ট ইভেন্ট ঘটলে স্বয়ংক্রিয় পদক্ষেপ গ্রহণ করা যায় এপিআই এর মাধ্যমে, যা সময়মত সমস্যা সমাধান করতে সাহায্য করে। এটা হলে ওটা হবে, অথবা এটা, এটা, এটা, এই তিনটা কাজ যখন হবে তখন এর রেজাল্ট হিসেবে আরেকটা কাজ করাতে হবে সেটাও করা সম্ভব এপিআই এর মাধ্যমে। অনেক সময় এটাকে ‘রুল বেজড’ অটোমেশন বলা যেতে পারে, যেখানে কয়েকটা কন্ডিশন ফুলফিল করলেই আরেকটা কাজ করার কমান্ড এপিআই দিয়ে চলে আসবে।

6. **কনফিগারেশন ম্যানেজমেন্ট (Configuration Management)**: এপিআই ব্যবহার করে ডিভাইসগুলোর কনফিগারেশন (এককভাবে অথবা গ্রুপ গ্রুপ করে) পরিবর্তন করা সহজ হয়, যা সম্পূর্ণ নেটওয়ার্ককে সঙ্গতিপূর্ণভাবে (যেভাবে চালানো উচিত) এবং নির্ভরযোগ্যভাবে (কোন ধরনের মানুষের ভুল অর্থাৎ হিউম্যান এরর ছাড়াই) ম্যানেজমেন্ট করা যায়। এটা যে কোন আইএসপি এবং নেটওয়ার্ক কোম্পানির শুরুর দিকের কাজ যা ইঞ্জিনিয়ারদের সময় অনেক কমিয়ে আনে।

7. **জিরো-টাচ প্রভিশনিং (Zero-Touch Provisioning)**: নতুন ডিভাইস নেটওয়ার্কে যুক্ত করার সময় স্বয়ংক্রিয়ভাবে কনফিগারেশন পুশ করা যায় এপিআই এর মাধ্যমে, যা প্রক্রিয়াটা দ্রুত এবং নির্ভুলভাবে সম্পন্ন করতে সাহায্য করে। অনেক সময় পুরো কনফিগারেশন পুশ না করা গেলেও বেজলাইন কনফিগারেশন পুশ করলেও নেটওয়ার্ক ইঞ্জিনিয়ারদের অনেক সময় বেঁচে যায়। নতুন নতুন সাইট ডেপ্লয় করার সময় এই অটোমেশন খুবই কাজে লাগে। 
